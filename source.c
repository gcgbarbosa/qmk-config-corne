#include QMK_KEYBOARD_H


#ifdef OLED_ENABLE

static void render_logo(void) {
    static const char PROGMEM gcgbarbosa_logo[] = {
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
		0x00, 0xff, 0xfc, 0x00, 0x01, 0xff, 0xfe, 0x00, 0x03, 0x80, 0x07, 0x00, 0x07, 0x00, 0x03, 0xc0
		0x0e, 0x00, 0x01, 0xe0, 0x0c, 0x00, 0x00, 0x70, 0x0c, 0x00, 0x00, 0x30, 0x0c, 0x00, 0x00, 0x30
		0x0c, 0x0c, 0x00, 0x30, 0x0c, 0x0c, 0x00, 0x30, 0x0c, 0x0c, 0x00, 0x30, 0x0e, 0x1c, 0x00, 0x30
		0x0f, 0xfc, 0x00, 0x30, 0x07, 0xf8, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
		0x00, 0xff, 0xfc, 0x00, 0x01, 0xff, 0xfe, 0x00, 0x03, 0x80, 0x07, 0x00, 0x07, 0x00, 0x03, 0x80
		0x0e, 0x00, 0x01, 0xc0, 0x0c, 0x00, 0x00, 0xe0, 0x0c, 0x00, 0x00, 0x70, 0x0c, 0x00, 0x00, 0x30
		0x0c, 0x00, 0x00, 0x30, 0x0c, 0x00, 0x00, 0x30, 0x0c, 0x00, 0x00, 0x30, 0x0c, 0x00, 0x00, 0x30
		0x0c, 0x00, 0x00, 0x30, 0x0c, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
		0x00, 0xff, 0xfc, 0x00, 0x01, 0xff, 0xfe, 0x00, 0x03, 0x80, 0x07, 0x00, 0x07, 0x00, 0x03, 0xc0
		0x0e, 0x00, 0x01, 0xe0, 0x0c, 0x00, 0x00, 0x70, 0x0c, 0x00, 0x00, 0x30, 0x0c, 0x00, 0x00, 0x30
		0x0c, 0x0c, 0x00, 0x30, 0x0c, 0x0c, 0x00, 0x30, 0x0c, 0x0c, 0x00, 0x30, 0x0e, 0x1c, 0x00, 0x30
		0x0f, 0xfc, 0x00, 0x30, 0x07, 0xf8, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
		0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xf0, 0x0f, 0xff, 0xff, 0xf0, 0x0c, 0x00, 0xc0, 0x30
		0x0c, 0x00, 0xc0, 0x30, 0x0c, 0x00, 0xc0, 0x30, 0x0c, 0x00, 0xc0, 0x30, 0x0c, 0x00, 0xc0, 0xf0
		0x0c, 0x00, 0xc0, 0xf0, 0x0c, 0x00, 0xff, 0xc0, 0x0c, 0x00, 0xff, 0xc0, 0x0f, 0x03, 0xc0, 0x00
		0x0f, 0x03, 0xc0, 0x00, 0x03, 0xff, 0x00, 0x00, 0x03, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
		0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x07, 0xc0, 0x00, 0x00, 0x00, 0x7e, 0x00, 0x00
		0x00, 0x43, 0x00, 0x00, 0x00, 0x41, 0x00, 0x00, 0x00, 0x4f, 0x00, 0x00, 0x03, 0xf8, 0x00, 0x00
		0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0x00, 0x00, 0x00, 0x81, 0x00, 0x00
		0x00, 0x81, 0x00, 0x00, 0x01, 0xc3, 0x00, 0x00, 0x03, 0x72, 0x00, 0x00, 0x0e, 0x3e, 0x00, 0x00
		0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0x00, 0x00, 0x08, 0x41, 0x00, 0x00, 0x08, 0x41, 0x00, 0x00
		0x08, 0x43, 0x00, 0x00, 0x08, 0x7e, 0x00, 0x00, 0x0c, 0xc0, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00
		0x00, 0x00, 0x00, 0x00, 0x03, 0xf8, 0x00, 0x00, 0x06, 0x0e, 0x00, 0x00, 0x0c, 0x02, 0x00, 0x00
		0x08, 0x03, 0x00, 0x00, 0x08, 0x01, 0x00, 0x00, 0x0c, 0x03, 0x00, 0x00, 0x06, 0x0e, 0x00, 0x00
		0x03, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x0c, 0x3e, 0x00, 0x00
		0x08, 0x73, 0x00, 0x00, 0x08, 0x41, 0x00, 0x00, 0x0c, 0xc3, 0x00, 0x00, 0x07, 0x86, 0x00, 0x00
		0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x07, 0xc0, 0x00, 0x00, 0x00, 0x7e, 0x00, 0x00
		0x00, 0x43, 0x00, 0x00, 0x00, 0x41, 0x00, 0x00, 0x00, 0x4f, 0x00, 0x00, 0x03, 0xf8, 0x00, 0x00
		0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xf0, 0x00, 0x00, 0x0e, 0x10, 0x00
		0x00, 0x0e, 0x10, 0x00, 0x00, 0x0e, 0x70, 0x00, 0x00, 0x0e, 0x70, 0x00, 0x00, 0x0f, 0x90, 0x00
		0x00, 0x0f, 0x90, 0x00, 0x00, 0x0f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	};

    oled_write_P(gcgbarbosa_logo, false);
}


static void render_status(void) {
    // Host Keyboard Layer Status
    oled_write_P(PSTR("Layer: "), false);

    switch (get_highest_layer(layer_state)) {
        case 0:
            oled_write_P(PSTR("Default\n"), false);
            break;
        case 1:
            oled_write_P(PSTR("FN\n"), false);
            break;
        case 2:
            oled_write_P(PSTR("ADJ\n"), false);
            break;
        default:
            // Or use the write_ln shortcut over adding '\n' to the end of your string
            oled_write_ln_P(PSTR("Undefined"), false);
    }

    // Host Keyboard LED Status
    led_t led_state = host_keyboard_led_state();
    oled_write_P(led_state.num_lock ? PSTR("NUM ") : PSTR("    "), false);
    oled_write_P(led_state.caps_lock ? PSTR("CAP ") : PSTR("    "), false);
    oled_write_P(led_state.scroll_lock ? PSTR("SCR ") : PSTR("    "), false);
}

oled_rotation_t oled_init_user(oled_rotation_t rotation) {
    if (!is_keyboard_master()) {
        return OLED_ROTATION_180;  // flips the display 180 degrees if offhand
    }

    return rotation;
}

bool oled_task_user(void) {
    if (is_keyboard_master()) {
        render_status();  // Renders the current keyboard state (layer, lock, caps, scroll, etc)
    } else {
        render_logo();  // Renders a static logo
    }
    return false;
}

#endif
